description: >
  Run a k6 test
docker:
  - image: loadimpact/k6:latest
parameters:
  arguments:
    description: >
      Any command-line arguments, or flags, that you would like to pass on to k6.
      For a full list of options, see https://k6.io/docs/using-k6/options.
    type: string
    default: ''
  script:
    description: >
      The path to your test script, relative to the current working directory
    type: string
    default: "script.js"
  cloud:
    description: >
      To run in the k6 cloud, provide your k6 cloud token as a secret to the input `token`.
      Dont have a k6 account yet? Go to https://k6.io/cloud and activate your free trial.
    type: boolean
    default: false
  token:
    description: >
      The API token used to run in the k6 cloud.
      You can find yours at https://app.k6.io/account/api-token.
    type: string
    default: ''
steps:
  - run-test:
      arguments: <<parameters.arguments>>
      script: <<parameters.script>>
      cloud: <<parameters.cloud>>
      token: <<parameters.token>>
